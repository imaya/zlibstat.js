/** @license zlibstat.js 2012 - imaya [ https://github.com/imaya/zlibstat.js ] The MIT License */
(function() {'use strict';var j=void 0,m=this;function n(a,e){var d=a.split("."),b=m;!(d[0]in b)&&b.execScript&&b.execScript("var "+d[0]);for(var c;d.length&&(c=d.shift());)!d.length&&e!==j?b[c]=e:b=b[c]?b[c]:b[c]={}};var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;function s(a){var e=a.length,d=0,b=Number.POSITIVE_INFINITY,c,h,f,g,i,k,o,q,l,p;for(l=0;l<e;++l)a[l]>d&&(d=a[l]),a[l]<b&&(b=a[l]);c=1<<d;h=new (r?Uint32Array:Array)(c);f=[];g=1;i=0;for(k=2;g<=d;){for(l=0;l<e;++l)if(a[l]===g){o=0;q=i;for(p=0;p<g;++p)o=o<<1|q&1,q>>=1;f.push([l,o,g]);for(p=o;p<c;p+=k)h[p]=g<<16|l;++i}++g;i<<=1;k<<=1}return[h,d,b,f]};function t(a,e){this.f=[];this.h=32768;this.d=this.g=this.a=0;this.input=r?new Uint8Array(a):a;this.c=this.l=this.e=0;this.r=this.k=!1;if(e&&(e.index&&(this.a=e.index),e.blockSize))this.h=e.blockSize;this.b=new (r?Uint8Array:Array)(this.h)}
t.prototype.i=function(){var a,e=this.f,d=this.l;r||(this.b.subarray=this.b.slice);for(;!this.k;){e[this.c]={};a=this.a;var b=u(this,3);b&1&&(this.k=!0);this.f[this.c]["final"]=b&1;b>>>=1;this.f[this.c].type=b;switch(b){case 0:var b=this.input,c=this.a,h=this.b,f=this.e,g=j,i=j,k=j;this.d=this.g=0;g=b[c++];if(g===j)throw Error("invalid uncompressed block header: LEN (first byte)");i=g;g=b[c++];if(g===j)throw Error("invalid uncompressed block header: LEN (second byte)");i|=g<<8;g=b[c++];if(g===j)throw Error("invalid uncompressed block header: NLEN (first byte)");
k=g;g=b[c++];if(g===j)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=g<<8;if(i===~k)throw Error("invalid uncompressed block header: length verify");if(c+i>b.length)throw Error("input buffer is broken");for(;f+i>h.length;)h=v(this,{m:2});if(r)h.set(b.subarray(c,c+i),f),f+=i,c+=i;else for(;i--;)h[f++]=b[c++];this.a=c;this.e=f;this.b=h;break;case 1:w(this,x,y);break;case 2:z(this);break;default:throw Error("unknown BTYPE: "+b);}e[this.c].plain=this.b.subarray(d,this.e);e[this.c].compressed=
r?this.input.subarray(a,this.a):this.input.slice(a,this.a);++this.c;d=this.e}this.l=d;e=this.e;this.r?r?(a=new Uint8Array(e),a.set(this.b.subarray(0,e))):a=this.b.slice(0,e):a=r?this.b.subarray(0,e):this.b.slice(0,e);return this.buffer=a};
var A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=r?new Uint16Array(A):A,C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],D=r?new Uint16Array(C):C,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],F=r?new Uint8Array(E):E,G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],H=r?new Uint16Array(G):G,I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,
13],J=r?new Uint8Array(I):I,K=new (r?Uint8Array:Array)(288),L,M;L=0;for(M=K.length;L<M;++L)K[L]=143>=L?8:255>=L?9:279>=L?7:8;var x=s(K),N=new (r?Uint8Array:Array)(30),O,P;O=0;for(P=N.length;O<P;++O)N[O]=5;var y=s(N);function u(a,e){for(var d=a.g,b=a.d,c=a.input,h=a.a,f;b<e;){f=c[h++];if(f===j)throw Error("input buffer is broken");d|=f<<b;b+=8}f=d&(1<<e)-1;a.g=d>>>e;a.d=b-e;a.a=h;return f}
function Q(a,e){for(var d=a.g,b=a.d,c=a.input,h=a.a,f=e[0],g=e[1],i;b<g;){i=c[h++];if(i===j)throw Error("input buffer is broken");d|=i<<b;b+=8}c=f[d&(1<<g)-1];f=c>>>16;a.g=d>>f;a.d=b-f;a.a=h;return c}
function z(a){function e(a,b,d){for(var c,e,f=0,f=0;f<a;)switch(c=Q(this,b)&65535,c){case 16:for(c=3+u(this,2);c--;)d[f++]=e;break;case 17:for(c=3+u(this,3);c--;)d[f++]=0;e=0;break;case 18:for(c=11+u(this,7);c--;)d[f++]=0;e=0;break;default:e=d[f++]=c}return d}var d=u(a,5)+257,b=u(a,5)+1,c=u(a,4)+4,h=new (r?Uint8Array:Array)(B.length),f;for(f=f=0;f<c;++f)h[B[f]]=u(a,3);c=s(h);h=new (r?Uint8Array:Array)(d);f=new (r?Uint8Array:Array)(b);w(a,s(e.call(a,d,c,h)),s(e.call(a,b,c,f)))}
function w(a,e,d){var b=a.b,c=a.e,h=a.f[a.c];a.p=e;h.litlenHuffmanTable=e[3];h.distHuffmanTable=d[3];var f=b.length,g,i,k,o=h.lzss=[],q=0,l=a.f[a.c].litlenCount=new (r?Uint8Array:Array)(286);if(!r)for(k=0;286>k;++k)l[k]=0;for(h.litlenCodeLength=0;256!==((g=Q(a,e))&65535);)if(h.litlenCodeLength+=g>>>16,g&=65535,++l[g],256>g)o[q++]=g,c===f&&(b=v(a),f=b.length),b[c++]=g;else{g-=257;k=D[g];0<F[g]&&(k+=u(a,F[g]));g=Q(a,d)&65535;i=H[g];0<J[g]&&(i+=u(a,J[g]));o[q++]=new R(k);c+k>=f&&(b=v(a),f=b.length);
for(;k--;)b[c]=b[c++-i]}for(;8<=a.d;)a.d-=8,a.a--;a.e=c}function R(a){this.length=a}function v(a,e){var d;d=a.input.length/a.a+1|0;var b=a.input,c=a.b;e&&("number"===typeof e.m&&(d=e.m),"number"===typeof e.o&&(d+=e.o));2>d?(d=(b.length-a.a)/a.p[2],d=258*(d/2)|0,d=d<c.length?c.length+d:c.length<<1):d*=c.length;r?(d=new Uint8Array(d),d.set(c)):d=c;a.b=d;return a.b};function S(a,e){var d,b,c;this.input=a;this.a=0;if(e&&(e.index&&(this.a=e.index),e.h&&(d=e.h),e.j))this.j=e.j;b=a[this.a++];c=a[this.a++];switch(b&15){case T:this.method=T;break;default:throw Error("unsupported compression method");}if(0!==((b<<8)+c)%31)throw Error("invalid fcheck flag:"+((b<<8)+c)%31);if(c&32)throw Error("fdict flag is not supported");this.n=new t(a,{index:this.a,h:d})}
S.prototype.i=function(){var a=this.input,e;e=this.n.i();if(this.j){var a=a[this.a++]<<24|a[this.a++]<<16|a[this.a++]<<8|a[this.a++],d=e;if("string"===typeof d){var d=d.split(""),b,c;b=0;for(c=d.length;b<c;b++)d[b]=(d[b].charCodeAt(0)&255)>>>0}b=1;c=0;for(var h=d.length,f,g=0;0<h;){f=1024<h?1024:h;h-=f;do b+=d[g++],c+=b;while(--f);b%=65521;c%=65521}if(a!==(c<<16|b)>>>0)throw Error("invalid adler-32 checksum");}return e};S.prototype.q=function(){return this.n.f};n("ZlibStat.Inflate",S);
n("ZlibStat.Inflate.prototype.decompress",S.prototype.i);n("ZlibStat.Inflate.prototype.getBlocks",S.prototype.q);var T=8;}).call(this);
